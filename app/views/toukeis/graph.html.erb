<h2>統計グラフ画面</h2>
<hr/>
<%= render 'form2' %>

<script>
$(function() {

    // Get graph data.
    $.ajax({
      url: "/toukeis/graph_data.json",
      dataType: "json",
      root: "list",
      data: {
        'outCnd' : $('#outCnd').val(),
        'outUnt' : $('#outUnt').val(),
        'sumUnt' : $('#sumUnt').val(),
        'targetSpnFrom' : $('#targetSpnFrom').val(),
        'targetSpnTo' : $('#targetSpnTo').val()
      },
      success: function(data) {
        response($.map(data.list, function(item) {
          return {
            label: item.kokyakuNm1+' '+item.kokyakuNm2+' - '+item.kokyakuId,
            value: item.kokyakuId
          }
        }))
      }
    })

    var values = [200, 600, 700, 1000];
    var ticks = ["太郎", "次郎", "花子", "陽子"];
    // Horizontal bar chart
    var plot_kin = $.jqplot('chart_kingaku', [values], {
        seriesDefaults: {
            renderer: $.jqplot.BarRenderer,
            // Show point labels to the right ('e'ast) of each bar.
            // edgeTolerance of -15 allows labels flow outside the grid
            // up to 15 pixels.  If they flow out more than that, they
            // will be hidden.
            pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
            // Rotate the bar shadow as if bar is lit from top right.
            shadowAngle: 135,
            // Here's where we tell the chart it is oriented horizontally.
            rendererOptions: {
                barDirection: 'horizontal'
            }
        },
        series:[
            {label:'金額'}
        ],
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
            }
        },
        legend: {
          show: true,
          location: 'e',
          placement: 'outside'
        }

    });

});
</script>
